@use "../abstracts/" as *;

:root {
  --reveal-duration-fade: 1400ms;
  --reveal-duration-move: 1800ms;
  --reveal-ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  --reveal-distance-base: 6px;
  --reveal-distance-card: 25px;
  --reveal-distance-hero: 4px;
  --reveal-card-scale-start: 0.997;

  --page-fade-duration: 3000ms;
  --page-move-duration: 2000ms;
  --page-ease: cubic-bezier(0.16, 1, 0.3, 1);
  --page-enter-y: 60px;

  --page-enter-delay: 120ms;
}

:root {
  @include for-mobile() {
    --page-enter-y: 0px;
    --page-fade-duration: 1000ms;
  }
}

html:not(.js) [data-reveal],
html:not(.js) [data-page] {
  opacity: 1;
  transform: none;
  transition: none;
}

html.js [data-reveal] {
  opacity: 0;
  transform: translate3d(0, var(--reveal-distance-base), 0);
  transition: none;
}

html.js [data-page] {
  opacity: 0;
  transform: translate3d(0, var(--page-enter-y), 0);
  transition: none;
}

html.js.is-loaded [data-reveal] {
  transition:
    opacity var(--reveal-duration-fade) var(--reveal-ease-standard),
    transform var(--reveal-duration-move) var(--reveal-ease-standard);
  transition-delay: var(--reveal-delay, 0ms);
  will-change: opacity, transform;
  backface-visibility: hidden;
}

html.is-loaded [data-page] {
  opacity: 0;
  transform: translate3d(0, var(--page-enter-y), 0);
  transition:
    opacity var(--page-fade-duration) var(--page-ease),
    transform var(--page-move-duration) var(--page-ease);
  transition-delay: var(--page-enter-delay, 0ms);
  will-change: opacity, transform;
}

/* Revealed state */
html.js.is-loaded [data-reveal].is-revealed {
  opacity: 1;
  transform: translate3d(0, 0, 0);
}

/* Page visible */
html.js.is-loaded [data-page].is-page-visible {
  opacity: 1;
  transform: translate3d(0, 0, 0);
}

.site-header [data-header-reveal] {
  transform: none !important;
  --reveal-duration-fade: 720ms;
  --reveal-duration-move: 0ms;
  --reveal-ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
}

/* Card variant */
html.js [data-reveal][data-reveal-card] {
  transform: translate3d(0, var(--reveal-distance-card), 0)
    scale(var(--reveal-card-scale-start));
}
html.js.is-loaded [data-reveal][data-reveal-card].is-revealed {
  transform: translate3d(0, 0, 0) scale(1);
}

/* Hero variant */
html.js [data-reveal][data-reveal-hero] {
  transform: translate3d(0, var(--reveal-distance-hero), 0);
}

/* HEADER: fade only, no Y */
.site-header [data-header-reveal],
.site-header [data-header-reveal] *[data-reveal] {
  transform: none !important;
}

.hero {
  --reveal-duration-fade: 980ms;
  --reveal-duration-move: 1400ms;
  --reveal-distance-hero: 3px;
}

html.js .site-header [data-header-reveal][data-reveal] {
  transform: none !important;
}

html.js .site-header [data-header-reveal] [data-reveal] {
  transform: none !important;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  html.js [data-page],
  html.js [data-reveal] {
    opacity: 1 !important;
    transform: none !important;
    transition: none !important;
    transition-delay: 0ms !important;
  }
}

@include for-mobile() {
  html.js [data-page],
  html.is-loaded [data-page],
  html.js.is-loaded [data-page].is-page-visible {
    transform: none !important;
  }
}